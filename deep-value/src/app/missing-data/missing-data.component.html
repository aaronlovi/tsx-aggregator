<h2 class="page-title">Missing Data</h2>

<div *ngIf="loading">Loading...</div>
<div *ngIf="errorMsg">{{ errorMsg }}</div>

<div class="table-container">
    <mat-table [dataSource]="instruments" class="data-table" width="80%">

        <!-- Instrument Symbol Column -->
        <ng-container matColumnDef="instrumentSymbol">
            <th mat-header-cell *matHeaderCellDef class="data-table__header">{{ textService.text_instrument_symbol | translate }}</th>
            <td mat-cell *matCellDef="let instrument" class="data-table__cell">
                <a [routerLink]="['/company-details', 'TSX', instrument.instrumentSymbol]" class="data-table__detail-link">
                    {{ instrument.instrumentSymbol }}
                </a>
            </td>
        </ng-container>

        <!-- Company Name Column -->
        <ng-container matColumnDef="companyName">
            <th mat-header-cell *matHeaderCellDef class="data-table__header">{{ textService.text_company_name | translate }}</th>
            <td mat-cell *matCellDef="let instrument" class="data-table__cell">{{ instrument.companyName }}</td>
        </ng-container>

        <!-- Instrument Name Column -->
        <ng-container matColumnDef="instrumentName">
            <th mat-header-cell *matHeaderCellDef class="data-table__header">{{ textService.text_instrument_name | translate }}</th>
            <td mat-cell *matCellDef="let instrument" class="data-table__cell">{{ instrument.instrumentName }}</td>
        </ng-container>

        <!-- Table Header Row -->
        <tr mat-header-row *matHeaderRowDef="displayedColumns; sticky: true"></tr>

        <!-- Table Data Rows -->
        <tr mat-row *matRowDef="let instrument; columns: displayedColumns;" class="data-table__row"></tr>
    </mat-table>
</div>

<div class="pagination-controls" *ngIf="pagingData">
    <button mat-icon-button (click)="goToFirstPage()" [disabled]="pagingData.pageNumber === 1">
        <mat-icon>first_page</mat-icon>
    </button>
    <button mat-icon-button (click)="goToPreviousPage()" [disabled]="pagingData.pageNumber === 1">
        <mat-icon>chevron_left</mat-icon>
    </button>
    <span class="pagination-controls__info">Page {{ pagingData.pageNumber }} of {{ pagingData.numPages }} ({{ pagingData.totalItems }} total)</span>
    <button mat-icon-button (click)="goToNextPage()" [disabled]="pagingData.pageNumber >= pagingData.numPages">
        <mat-icon>chevron_right</mat-icon>
    </button>
    <button mat-icon-button (click)="goToLastPage()" [disabled]="pagingData.pageNumber >= pagingData.numPages">
        <mat-icon>last_page</mat-icon>
    </button>
</div>
