<h2 class="page-title">System Controls</h2>

<h3>Priority Companies</h3>

<div class="priority-input-section">
  <mat-form-field appearance="outline" class="priority-input">
    <mat-label>Company symbols (comma-separated)</mat-label>
    <input matInput [(ngModel)]="newSymbolsInput" placeholder="CNQ, SU, TD"
      (keyup.enter)="setPriorityCompanies()">
    </mat-form-field>

    <div class="priority-buttons">
      <button mat-raised-button color="primary" (click)="setPriorityCompanies()"
        [disabled]="loading || newSymbolsInput.trim().length === 0">
        Set Priority
      </button>
      <button mat-button (click)="clearPriorityQueue()"
        [disabled]="loading || prioritySymbols.length === 0">
        Clear Queue
      </button>
    </div>
  </div>

  @if (loading) {
    <div class="status-message">Loading...</div>
  }
  @if (errorMsg) {
    <div class="status-message error-message">{{ errorMsg }}</div>
  }
  @if (successMsg) {
    <div class="status-message success-message">{{ successMsg }}</div>
  }

  <div class="priority-queue-section">
    <h4>Current Queue</h4>
    @if (prioritySymbols.length === 0 && !loading) {
      <div class="queue-empty">
        Queue is empty
      </div>
    }
    @if (prioritySymbols.length > 0) {
      <div class="queue-list">
        @for (symbol of prioritySymbols; track symbol; let last = $last) {
          <span class="queue-symbol">
            {{ symbol }}@if (!last) {
            <span>, </span>
          }
        </span>
      }
    </div>
  }
</div>
